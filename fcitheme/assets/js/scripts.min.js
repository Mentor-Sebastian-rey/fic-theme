
// Ejecutamos el slider del home
/*
*/

function btnAtras(){
    document.querySelectorAll('.ncausa--pestanas__tab .slick-prev').forEach(function(cadaUno){
        cadaUno.click()
    })
}

jQuery(document).ready(function ($) {
    $('.home-carousel1').slick({
        slidesToShow: 4,
        slidesToScroll: 1,
        infinite: true,
        speed: 300,
        responsive: [
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 765,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 500,
                settings: {
                    slidesToShow: 1,
                }
            },
        ]
    });
    $('.carousel-instalaciones').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        speed: 300,
    });
    $('.gutenber-slider').slick({
        slidesToShow: 2,
        slidesToScroll: 1,
        infinite: true,
        speed: 300,
        autoplay: true,
        autoplaySpeed: 4000,
    });
    $('.slider_clientes').slick({
        slidesToShow: 2,
        slidesToScroll: 1,
        infinite: true,
        speed: 300,
        responsive: [
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                }
            },
        ]
    });
    $('.slider_resultados').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        speed: 300,
    });

    /* Sliders de Aceite de Palma */
    $('.home_slider-cont').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: true,
        dotsClass: 'punticos',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev"><i class="fal fa-arrow-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next"><i class="fal fa-arrow-right"></i></button>',
    });
    $('.home_historias .slider').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: true,
        dotsClass: 'punticos2',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev"><i class="fal fa-arrow-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next"><i class="fal fa-arrow-right"></i></button>',
    });
    $('.single--slider > .wp-block-gallery').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: true,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev blog"><i class="fal fa-arrow-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next blog"><i class="fal fa-arrow-right"></i></button>',
    });

    /* AMARILO PLUS */
    $('.home_sugeridos__slider').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide"><i class="far fa-angle-right"></i></button>',
    });
    $('.home_beneficiosmes__slider').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide2"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide2"><i class="far fa-angle-right"></i></button>',
    });

    /* FCI */
    $('.home__slider--cont').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        infinite: true,
        dots: true,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide2"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide2"><i class="far fa-angle-right"></i></button>',
    });
    
    $('.ncausa--pestanas__slidernotis').slick({ /* Noticias */
        slidesToShow: 3,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide4"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide4"><i class="far fa-angle-right"></i></button>',
        responsive: [
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 765,
                settings: {
                    slidesToShow: 1,
                }
            },
        ],
    });

    $('.ncausa__testimonios--slider').slick({
        slidesToShow: 5,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide3"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide3"><i class="far fa-angle-right"></i></button>',
        responsive: [
            {
                breakpoint: 1200,
                settings: {
                    slidesToShow: 4,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 765,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 500,
                settings: {
                    slidesToShow: 1,
                }
            },
        ],
    });


    $('.aliados-logos_cont').slick({
        slidesToShow: 5,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide4"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide4"><i class="far fa-angle-right"></i></button>',
        responsive: [
            {
                breakpoint: 1200,
                settings: {
                    slidesToShow: 4,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 765,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 500,
                settings: {
                    slidesToShow: 2,
                }
            },
        ],
    });

    $('.tienda__productos--slider').slick({
        slidesToShow: 5,
        slidesToScroll: 1,
        infinite: true,
        dots: false,
        dotsClass: 'punticos3',
        speed: 300,
        autoplay: true,
        autoplaySpeed: 10000,
        prevArrow: '<button type="button" class="slick-prev home_slide5"><i class="far fa-angle-left"></i></button>',
        nextArrow: '<button type="button" class="slick-next home_slide5"><i class="far fa-angle-right"></i></button>',
        responsive: [
            {
                breakpoint: 1200,
                settings: {
                    slidesToShow: 4,
                }
            },
            {
                breakpoint: 992,
                settings: {
                    slidesToShow: 3,
                }
            },
            {
                breakpoint: 765,
                settings: {
                    slidesToShow: 2,
                }
            },
            {
                breakpoint: 500,
                settings: {
                    slidesToShow: 1,
                }
            },
        ],
    });




})

document.addEventListener('DOMContentLoaded', function () {
    /* Botones galerías - Instalaciones home */
    if (document.querySelector('.btns_instalaciones_gal')) {

        const instalaciones = document.querySelector('.btns_instalaciones_gal')
        const actuales = document.querySelector('.btns_instalaciones_gal .actuales')
        const nuevas = document.querySelector('.btns_instalaciones_gal .nuevas')

        actuales.addEventListener('click', function (event) {

            event.preventDefault()

            instalaciones.querySelectorAll('a').forEach(function (cadaUno) {
                cadaUno.classList.remove('elegida')
            })
            actuales.classList.add('elegida')
            document.querySelectorAll('.shi_contenedor').forEach(function (cadaUno) {
                cadaUno.classList.remove('mostrar')
            })
            document.querySelectorAll('.shi_contenedor')[0].classList.add('mostrar')
            jQuery('.carousel-instalaciones').slick('unslick');
            jQuery('.carousel-instalaciones').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                infinite: true,
                speed: 300,
            });
        })
        nuevas.addEventListener('click', function (event) {
            event.preventDefault()

            instalaciones.querySelectorAll('a').forEach(function (cadaUno) {
                cadaUno.classList.remove('elegida')
            })
            nuevas.classList.add('elegida')
            document.querySelectorAll('.shi_contenedor').forEach(function (cadaUno) {
                cadaUno.classList.remove('mostrar')
            })
            document.querySelectorAll('.shi_contenedor')[1].classList.add('mostrar')

            jQuery('.carousel-instalaciones').slick('unslick');
            jQuery('.carousel-instalaciones').slick({
                slidesToShow: 1,
                slidesToScroll: 1,
                infinite: true,
                speed: 300,
            });
        })

    }

    /* Botones clientes home - slider */
    if (document.querySelectorAll('.home-clientes-nav a')[0]) {
        document.querySelectorAll('.home-clientes-nav a')[0].addEventListener('click', function (event) {
            event.preventDefault()
            document.querySelector('.slider_clientes .slick-prev').click()
        })
        document.querySelectorAll('.home-clientes-nav a')[1].addEventListener('click', function (event) {
            event.preventDefault()
            document.querySelector('.slider_clientes .slick-next').click()
        })
    }

    /* Botones resultados - slider */
    if (document.querySelectorAll('.slider_resultados-nav a')[0]) {
        document.querySelectorAll('.slider_resultados-nav a')[0].addEventListener('click', function (event) {
            event.preventDefault()
            document.querySelector('.slider_resultados .slick-prev').click()
        })
        document.querySelectorAll('.slider_resultados-nav a')[1].addEventListener('click', function (event) {
            event.preventDefault()
            document.querySelector('.slider_resultados .slick-next').click()
        })
    }

    document.querySelectorAll('.mapa__botones ul li a').forEach(function(cadaUno, indice){
        cadaUno.addEventListener('click', function( event ){
            event.preventDefault()
            console.log('click')
        })
        cadaUno.addEventListener('mouseover', function( event ){
            document.querySelectorAll('.mapa__imagen__points--indv')[indice].classList.add('selected')
        })
        cadaUno.addEventListener('mouseout', function( event ){
            document.querySelectorAll('.mapa__imagen__points--indv')[indice].classList.remove('selected')
        })
    })

})



/* Correcciones de alto */
if (document.querySelector('.taxo .taxo-perfil-indv .-contenido')) {
    const contenidos = document.querySelectorAll('.taxo .taxo-perfil-indv .-contenido')
    let alto = 0
    contenidos.forEach(function (cadaUno) {
        if (cadaUno.offsetHeight > alto) {
            alto = cadaUno.offsetHeight
        }
    })
    contenidos.forEach(function (cadaUno) {
        cadaUno.style.height = alto + 'px'
    })

}

document.addEventListener('DOMContentLoaded', function () {
    function redimensionarYT() {
        if(document.querySelector('.blog-cont .wp-block-embed__wrapper iframe')){
            let ancho = document.querySelector('.blog-cont .wp-block-embed__wrapper iframe').offsetWidth
            let conversion = 1920 / ancho
            let alto_n = 1024 / conversion
            document.querySelector('.blog-cont .wp-block-embed__wrapper iframe').style.height = alto_n + "px"
        }
    }
    if (document.querySelector('.blog-cont .wp-block-embed__wrapper')) {
        redimensionarYT()
        window.addEventListener('resize', function (event) {
            redimensionarYT()
        }, true);
    }

})

/* Controlar formulario de contacto */
if(document.querySelector('.btnLlamarForm')){
    document.querySelectorAll('.btnLlamarForm').forEach(function(cadaUno){
        cadaUno.addEventListener('click', function( event ){
            event.preventDefault()
            // overflow-hidden - para el body
            document.querySelector('.modalForm').classList.add('open')
            document.querySelector('body').classList.add('overflow-hidden')
        })
    })
}
if(document.querySelector('.modalForm_close')){
    document.querySelector('.modalForm_close').addEventListener('click', function(event){
        event.preventDefault()
        document.querySelector('.modalForm').classList.remove('open')
        document.querySelector('body').classList.remove('overflow-hidden')
    })
}



/* APLUS */
HTMLElement.prototype.prependHtml = function (element) {
    const div = document.createElement('div');
    div.innerHTML = element;
    this.insertBefore(div, this.firstChild);
};

HTMLElement.prototype.appendHtml = function (element) {
    const div = document.createElement('div');
    div.innerHTML = element;
    while (div.children.length > 0) {
        this.appendChild(div.children[0]);
    }
};

/* Menu primer nivel */
document.querySelectorAll('.menu-item-has-children').forEach(function( cadaEnlace ){
    const texto = cadaEnlace.querySelector('a').innerText
    cadaEnlace.querySelector('.sub-menu').prependHtml(`<span class="menu_btn_volver">‹‹ ${texto}</span>`);
})

document.querySelectorAll('.main-menu > li.menu-item-has-children > a').forEach(function( cadaLink ){

   cadaLink.addEventListener('click', function( event ){
        event.preventDefault()
        let volver_btn = `<span class="menu_btn_volver">${this.innerText}</span>`
        document.querySelectorAll('.sub-menu').forEach(function( cadaSub ){
            cadaSub.classList.remove('open')
        })
        cadaLink.parentElement.querySelector('.sub-menu').classList.add('open')
        // cadaLink.parentElement.querySelector('.sub-menu').innerHTML = volver_btn + cadaLink.parentElement.querySelector('.sub-menu').innerHTML;
    })
})

document.querySelectorAll('.menu_btn_volver').forEach(function( cadaBtn ){
    cadaBtn.addEventListener('click', function( event ){
        this.parentElement.parentElement.classList.remove('open')
    })
})

/* Menu segundo nivel */
document.querySelectorAll('.main-menu > li.menu-item-has-children > .sub-menu > li.menu-item-has-children > a').forEach(function( cadaLink ){
    cadaLink.addEventListener('click', function( event ){
        event.preventDefault()
        document.querySelectorAll('.main-menu > li.menu-item-has-children > .sub-menu > li.menu-item-has-children .sub-menu').forEach(function( cadaSub ){
            cadaSub.classList.remove('open')
        })
        cadaLink.parentElement.querySelector('.sub-menu').classList.add('open')
    })
})


/* Menu responsive */
document.querySelector('.abrir_menu_cell').addEventListener('click', function( event ){
    event.preventDefault()
    document.querySelector('.menu_responsive_cont').classList.add('activo')
})
document.querySelector('.cerrar_menu_cell').addEventListener('click', function( event ){
    event.preventDefault()
    document.querySelector('.menu_responsive_cont').classList.remove('activo')
})


function redimensionarYT(){
    if(document.querySelector('.video_youtube iframe')){
        let ancho = document.querySelector('.video_youtube iframe').offsetWidth
        let conversion = 1920 / ancho
        let alto_n = 1024 / conversion
        document.querySelector('.video_youtube iframe').style.height = alto_n + "px"
    }
}
document.addEventListener('DOMContentLoaded', function(){
    redimensionarYT()
    window.addEventListener('resize', function(event) {
        redimensionarYT()
    }, true);
})



/* tab del home */
if(document.querySelector('.home__programas--pestanas')){
    document.querySelectorAll('.home__programas--pestanas .home__programas--pestanas__btns li a').forEach(function(cadaBtnPest, indice){
        let indice_actual = 0
        cadaBtnPest.addEventListener('click', function( event ){
            event.preventDefault()
            document.querySelectorAll('.home__programas--pestanas .home__programas--pestanas__btns li a').forEach(function(cu){
                cu.classList.remove('selected')
            })
            this.classList.add('selected')
            document.querySelectorAll('.home__programas--pestanas__tab').forEach(function(cu){
                cu.classList.remove('mostrar')
            })
            document.querySelectorAll('.home__programas--pestanas__tab')[indice].classList.add('mostrar')
            redimensionarYT()
    
            indice_actual = indice
        })
    })
}

/* tab de nuestra causa */
if(document.querySelector('.ncausa--pestanas')){

    document.querySelectorAll('.ncausa--pestanas__btns li a').forEach(function(cadaBtnPest, indice){
        let indice_actual = 0
        cadaBtnPest.addEventListener('click', function( event ){
            event.preventDefault()
            document.querySelectorAll('.ncausa--pestanas__btns li a').forEach(function(cu){
                cu.classList.remove('selected')
            })
            this.classList.add('selected')
            document.querySelectorAll('.ncausa--pestanas__tab').forEach(function(cu){
                cu.classList.remove('mostrar')
            })
            document.querySelectorAll('.ncausa--pestanas__tab')[indice].classList.add('mostrar')
            redimensionarYT()
    
            indice_actual = indice

            btnAtras()
        })
    })

}







